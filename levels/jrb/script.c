#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

/* Fast64 begin persistent block [includes] */
/* Fast64 end persistent block [includes] */

#include "make_const_nonconst.h"
#include "levels/jrb/header.h"

/* Fast64 begin persistent block [scripts] */
/* Fast64 end persistent block [scripts] */

const LevelScript level_jrb_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x7, _jrb_segment_7SegmentRomStart, _jrb_segment_7SegmentRomEnd), 
	LOAD_MIO0(0xa, _bitfs_skybox_mio0SegmentRomStart, _bitfs_skybox_mio0SegmentRomEnd), 
	LOAD_YAY0(0x08, _common0_yay0SegmentRomStart, _common0_yay0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	LOAD_YAY0(0x06, _group14_yay0SegmentRomStart, _group14_yay0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	LOAD_YAY0(0x05, _group2_yay0SegmentRomStart, _group2_yay0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group2_geoSegmentRomStart, _group2_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_3), 
	JUMP_LINK(script_func_global_15), 

	/* Fast64 begin persistent block [level commands] */
	/* Fast64 end persistent block [level commands] */

	AREA(1, jrb_area_1),
		WARP_NODE(241, LEVEL_CASTLE_GROUNDS, 1, 8, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_CASTLE_GROUNDS, 1, 7, WARP_NO_CHECKPOINT),
		WARP_NODE(0, LEVEL_JRB, 1, 0, WARP_NO_CHECKPOINT),
		WARP_NODE(5, LEVEL_JRB, 1, 6, WARP_NO_CHECKPOINT),
		WARP_NODE(6, LEVEL_JRB, 1, 5, WARP_NO_CHECKPOINT),
		WARP_NODE(10, LEVEL_CASTLE_GROUNDS, 1, 10, WARP_NO_CHECKPOINT),
		OBJECT(212, -239, 1481, -6608, 0, 136, 0, 0x0, bhv1Up),
		OBJECT(212, -1380, -179, -3136, 0, 136, 0, 0x0, bhv1Up),
		OBJECT(140, 15818, -265, -4019, 0, 96, 0, 0x0, bhvBlueCoinSwitch),
		OBJECT(188, 12671, 2979, -16895, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(195, 4087, 2308, -79, 0, -53, 0, 0x0, bhvBobombBuddyOpensCannon),
		OBJECT(201, 9383, 491, -4987, 0, -180, 0, 0x0, bhvCannonClosed),
		OBJECT_WITH_ACTS(202, 11963, 1500, -10481, 0, 0, 0, 0x0, bhvCheckerboardElevatorGroup, ACT_5),
		OBJECT_WITH_ACTS(202, 11953, 480, -9898, 0, 0, 0, 0x0, bhvCheckerboardElevatorGroup, ACT_5),
		OBJECT(223, 16160, 3781, -3592, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, 15878, 3781, -1820, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, 14557, 3781, -2865, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(0, 7809, 1896, -18040, 0, 111, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 7920, 1896, -17757, 0, 111, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 8030, 1896, -17477, 0, 111, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 16182, 4434, -6883, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 15323, 3722, -7531, 0, 90, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 4000, -464, -16123, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 4658, 1624, -13150, 0, 102, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 1429, 990, -9810, 0, 90, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 917, 313, -13488, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 548, -515, -16030, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 15822, -536, -10515, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 12048, 2401, -1828, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 1935, 2372, -759, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 16040, 3781, -5185, 0, 3, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 6461, 29, -5041, 0, 156, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 5703, -190, -7540, 0, 91, 0, 0x0, bhvCoinFormation),
		OBJECT(0, -598, -211, -5468, 0, -29, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 15815, 2759, -11418, 0, -39, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 13456, -211, -4516, 0, 97, 0, 0x40000, bhvCoinFormation),
		OBJECT(0, 8890, 78, -8086, 0, 49, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 12521, 2237, 571, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 10238, 2237, 1551, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 8696, 2282, -14167, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 13002, 3069, -16674, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 3072, 1481, -8139, 0, 0, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 1242, 1481, -10060, 0, 90, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 15891, -142, -81, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 16151, 4560, -8207, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT_WITH_ACTS(137, -530, 5418, -5808, 0, -32, 0, 0x0, bhvExclamationBox, ACT_6),
		OBJECT(137, 15883, 104, -72, 0, 27, 0, 0x30000, bhvExclamationBox),
		OBJECT(137, 14387, 4139, -8252, 0, -1, 0, 0x30000, bhvExclamationBox),
		OBJECT(137, -802, 0, -444, 0, 21, 0, 0x30000, bhvExclamationBox),
		OBJECT(137, 15306, 2424, -15314, 0, -54, 0, 0x30000, bhvExclamationBox),
		OBJECT(137, 15995, -83, -4039, 0, 7, 0, 0x30000, bhvExclamationBox),
		OBJECT(0, 6730, -30, -16834, 0, 14, 0, 0x50000, bhvFadingWarp),
		OBJECT(0, 15295, 2356, -15320, 0, 37, 0, 0x60000, bhvFadingWarp),
		OBJECT(180, 780, 943, -14632, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 7156, 2005, -14630, 0, -46, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 16036, 3781, -5173, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 15836, 4052, -10485, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT_WITH_ACTS(0, 8998, 3180, 3637, 0, -173, 0, 0x0, bhvFlamethrower, ACT_5 | ACT_6),
		OBJECT_WITH_ACTS(0, 5629, 3198, 3597, 0, -180, 0, 0x0, bhvFlamethrower, ACT_5 | ACT_6),
		OBJECT_WITH_ACTS(0, 3225, 3192, 3367, 0, 168, 0, 0x0, bhvFlamethrower, ACT_5 | ACT_6),
		OBJECT_WITH_ACTS(0, 1114, 3198, 2217, 0, 143, 0, 0x0, bhvFlamethrower, ACT_5 | ACT_6),
		OBJECT_WITH_ACTS(0, 11177, 3132, 3342, 0, -166, 0, 0x0, bhvFlamethrower, ACT_5 | ACT_6),
		OBJECT_WITH_ACTS(0, 13511, 3258, 2122, 0, -142, 0, 0x0, bhvFlamethrower, ACT_5 | ACT_6),
		OBJECT(207, 781, 313, -14596, 0, 9, 0, 0x0, bhvFloorSwitchHiddenObjects),
		OBJECT(0, 4007, -464, -16088, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 10498, 229, -6986, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 5398, -161, -8721, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 6618, 1591, -13298, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 11385, 2649, -15891, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(118, 16098, -291, -4741, 0, 5, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 15809, -260, -4621, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 16068, -310, -5067, 0, 8, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 15743, -263, -5139, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 15557, -229, -4841, 0, 4, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(129, 406, 1278, -16945, 0, 10, 0, 0x0, bhvHiddenObject),
		OBJECT(129, 642, 2100, -15473, 0, 9, 0, 0x0, bhvHiddenObject),
		OBJECT(0, 485, 62, -7393, 0, 0, 0, 0x3000000, bhvHiddenRedCoinStar),
		OBJECT(0, 11077, 2641, 367, 0, 0, 0, 0x5000000, bhvHiddenStar),
		OBJECT(0, 1575, 5029, -4929, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, 3703, 3844, -3955, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, 5904, 2283, -3162, 0, -23, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, 8265, 3305, -2244, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, 10390, 4128, -1566, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT_WITH_ACTS(104, 850, -94, -7957, 0, -121, 0, 0x4020000, bhvKoopa, ACT_5),
		OBJECT_WITH_ACTS(0, -849, 4002, -1878, 0, 0, 0, 0x0, bhvKoopaRaceEndpoint, ACT_5),
		OBJECT_WITH_ACTS(124, 12046, 560, -9349, 0, -43, 0, 0x230000, bhvMessagePanel, ACT_1 | ACT_2 | ACT_3 | ACT_4),
		OBJECT(124, -408, 5163, -6014, 0, -29, 0, 0x200000, bhvMessagePanel),
		OBJECT(116, 13821, 4243, -14161, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 13782, 4243, -14678, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 13769, 4243, -15211, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 14166, 4243, -13765, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 14544, 4243, -13390, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 14877, 4243, -13065, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 13772, 4243, -15738, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 13770, 4243, -16284, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 15178, 4243, -12763, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 1594, 4982, -4917, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 3698, 3800, -3949, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 5899, 2256, -3170, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 8264, 3282, -2246, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 10394, 4092, -1556, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 4175, -358, -9806, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 4005, -522, -10243, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 3699, -522, -10655, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 3240, -521, -11006, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 2675, -521, -11080, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, 2150, -508, -10814, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(215, 12613, 4493, -14372, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 13678, 4489, -12418, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 12138, 4504, -12860, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 15046, 4493, -14525, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 2003, -292, -9370, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 1830, -292, -7997, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 375, -292, -8697, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 2301, -292, -6937, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(86, 9050, -107, -6301, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 8158, -162, -5275, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 5865, -161, -6300, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 3031, -500, -13882, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 3712, -500, -13642, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 1811, 2372, -518, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 1839, 2372, -1017, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 11918, 2401, -1621, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 12291, 2401, -2031, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(86, 11801, 2401, -2124, 0, 0, 0, 0x0, bhvSmallBully),
		OBJECT(0, 494, -94, -7402, 0, 0, 0, 0xa0000, bhvSpinAirborneWarp),
		OBJECT_WITH_ACTS(122, -845, 3984, -1874, 0, 0, 0, 0x0, bhvStar, ACT_1),
		OBJECT(122, 17191, 4692, -7466, 0, 0, 0, 0x2000000, bhvStar),
		OBJECT(122, 535, 2735, -16058, 0, 0, 0, 0x1000000, bhvStar),
		TERRAIN(jrb_area_1_collision),
		MACRO_OBJECTS(jrb_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 40),
		TERRAIN_TYPE(TERRAIN_GRASS),
		/* Fast64 begin persistent block [area commands] */
		/* Fast64 end persistent block [area commands] */
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
